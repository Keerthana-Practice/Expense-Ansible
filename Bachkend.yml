- name: backend setup
  hosts: all
  become: yes
  tasks:
    - name : install nodejs
      ansible.builtin.dnf:
        name : nodejs
        state : Latest

    - name : Adding user
      ansible.builtin.user:
       name: expense

    - name :
      ansible.builtin.file:
          path: /etc/app
          state: directory

    - name : Download and extract the frontend content
      ansible.builtin.unarchive:
       src: https://expense-artifacts.s3.amazonaws.com/expense-backend-v2.zip
       dest: /tmp/backend.zip
       remote_src: yes

    - name : install dependencies of the project
      community.general.npm:
       name : npm
       state : latest

    - name : Backend config file
      ansible.builtin.copy:
        src: backend.service
        dest: /etc/systemd/system/backend.service

    - name : enable system services
      ansible.builtin.systemd_service:
       state : restarted
       name : backend















